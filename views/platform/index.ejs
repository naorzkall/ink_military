<%- include('../include/head.ejs') %>
</head>
<body>
  <%- include('../include/navigation.ejs') %>
    <!-- Upload Content Start -->
    <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
        data-sidebar-position="fixed" data-header-position="fixed">
      <div class="position-relative overflow-hidden radial-gradient min-vh-100 d-flex align-items-center justify-content-center">
          <div class="container-fluid d-flex justify-content-center align-items-center vh-100 col-md-10 col-lg-9 col-xxl-5 ">
            <div class="card-body container text-center">
                <h2 class="mb-4">Cloud Uploader</h2>
                <div class="upload-box mb-4">
                    <input type="file" id="fileInput" multiple>
                    <label for="fileInput">Drag and drop or browse files</label>
                </div>
                <div class="uploaded-files">

                </div>
            </div>   
          </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('fileInput').addEventListener('change', function(event) {
    const files = event.target.files;
    const uploadedFiles = document.querySelector('.uploaded-files');

    for (let file of files) {
        const fileItem = document.createElement('div');
        fileItem.classList.add('file-item');

        const fileName = document.createElement('span');
        fileName.classList.add('file-name');
        fileName.textContent = file.name;

        const fileProgress = document.createElement('span');
        fileProgress.classList.add('file-progress');
        fileProgress.textContent = '0%';

        const progressBar = document.createElement('div');
        progressBar.classList.add('progress-bar');
        const progress = document.createElement('div');
        progress.classList.add('progress');
        progress.style.width = '0%';
        progressBar.appendChild(progress);

        const fileStatus = document.createElement('span');
        fileStatus.classList.add('file-status');
        fileStatus.textContent = 'X';

        fileItem.appendChild(fileName);
        fileItem.appendChild(fileProgress);
        fileItem.appendChild(progressBar);
        fileItem.appendChild(fileStatus);

        uploadedFiles.appendChild(fileItem);

        // Simulate file upload progress
        simulateUpload(file, fileProgress, progress, fileStatus);
    }
});

function simulateUpload(file, fileProgress, progress, fileStatus) {
    let progressValue = 0;
    const interval = setInterval(() => {
        if (progressValue >= 100) {
            clearInterval(interval);
            fileProgress.textContent = '100%';
            progress.style.width = '100%';
            fileStatus.textContent = 'âœ”';
        } else {
            progressValue += Math.random() * 10;
            fileProgress.textContent = `${Math.min(100, progressValue).toFixed(0)}%`;
            progress.style.width = `${Math.min(100, progressValue).toFixed(0)}%`;
        }
    }, 500);
}

</script>
<%- include('../include/end.ejs') %>
